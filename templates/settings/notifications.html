{% extends "settings_base.html" %}

{% block page_title %}Уведомления{% endblock %}
{% block active_page %}notifications{% endblock %}

{% block settings_content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Настройки уведомлений</h3>
    </div>
    <div class="card-body">
        <form method="POST" class="notifications-form">
            <div class="notifications-section">
                <h4>Техническое обслуживание</h4>
                <div class="notification-options">
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="maintenance_reminder" checked>
                            Уведомления о предстоящем ТО
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="maintenance_completion" checked>
                            Уведомления о завершении ТО
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="maintenance_overdue" checked>
                            Уведомления о просроченном ТО
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="maintenance_cost_alert" checked>
                            Уведомления о превышении стоимости ТО
                        </label>
                    </div>
                </div>
            </div>

            <div class="notifications-section">
                <h4>Автомобили</h4>
                <div class="notification-options">
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="car_status_change" checked>
                            Изменение статуса автомобиля
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="mileage_alert" checked>
                            Превышение пробега
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="car_insurance_expiry" checked>
                            Окончание страховки
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="car_license_expiry" checked>
                            Окончание лицензии
                        </label>
                    </div>
                </div>
            </div>

            <div class="notifications-section">
                <h4>Механики</h4>
                <div class="notification-options">
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="mechanic_assignment" checked>
                            Назначение на работу
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="mechanic_schedule_change" checked>
                            Изменение графика
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="mechanic_work_completion" checked>
                            Завершение работы
                        </label>
                    </div>
                </div>
            </div>

            <div class="notifications-section">
                <h4>Методы доставки</h4>
                <div class="notification-options">
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="email_notifications" checked>
                            Email уведомления
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="sms_notifications">
                            SMS уведомления
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" name="push_notifications" checked>
                            Push уведомления (в браузере)
                        </label>
                    </div>
                </div>
            </div>

            <div class="notifications-section">
                <h4>Частота уведомлений</h4>
                <div class="notification-options">
                    <div class="form-group">
                        <label class="form-label">Уведомления о предстоящем ТО за:</label>
                        <select name="maintenance_reminder_days" class="form-control">
                            <option value="30">30 дней</option>
                            <option value="15">15 дней</option>
                            <option value="7">7 дней</option>
                            <option value="3">3 дня</option>
                            <option value="1">1 день</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Уведомления о просрочке каждые:</label>
                        <select name="overdue_notification_frequency" class="form-control">
                            <option value="daily">Ежедневно</option>
                            <option value="weekly">Еженедельно</option>
                            <option value="monthly">Ежемесячно</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Сохранить настройки
                </button>
                <a href="{{ url_for('notification_settings') }}" class="btn btn-outline">
                    <i class="fas fa-redo"></i>
                    Сбросить
                </a>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">Уведомления за последние 30 дней</h3>
    </div>
    <div class="card-body">
        <div class="recent-notifications">
            <div class="notification-item">
                <div class="notification-icon">
                    <i class="fas fa-wrench"></i>
                </div>
                <div class="notification-content">
                    <h5>Предстоящее ТО</h5>
                    <p>Автомобиль Toyota Camry (А123ВС) требует ТО через 15 дней</p>
                    <small class="text-muted">2 часа назад</small>
                </div>
            </div>
            
            <div class="notification-item">
                <div class="notification-icon">
                    <i class="fas fa-car"></i>
                </div>
                <div class="notification-content">
                    <h5>Изменение статуса</h5>
                    <p>Статус автомобиля BMW X5 (В456СD) изменен на "На ремонте"</p>
                    <small class="text-muted">1 день назад</small>
                </div>
            </div>
            
            <div class="notification-item">
                <div class="notification-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="notification-content">
                    <h5>Напоминание о страховке</h5>
                    <p>Страховка автомобиля Mercedes C-Class (С789ЕF) заканчивается через 7 дней</p>
                    <small class="text-muted">3 дня назад</small>
                </div>
            </div>
        </div>
        
        <div class="notification-actions">
            <button class="btn btn-outline" onclick="clearNotifications()">
                <i class="fas fa-trash"></i>
                Очистить уведомления
            </button>
            <button class="btn btn-outline" onclick="markAllAsRead()">
                <i class="fas fa-check-circle"></i>
                Отметить все как прочитанные
            </button>
        </div>
    </div>
</div>

<script>
function clearNotifications() {
    if (confirm('Вы уверены, что хотите очистить все уведомления?')) {
        alert('Функция очистки уведомлений будет реализована в следующей версии');
    }
}

function markAllAsRead() {
    alert('Функция отметки всех уведомлений как прочитанных будет реализована в следующей версии');
}
</script>
{% endblock %}